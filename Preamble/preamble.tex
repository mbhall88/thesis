% ******************************************************************************
% ****************************** Custom Margin *********************************

% Add `custommargin' in the document class options to use this section
% Set {innerside margin / outerside margin / topmargin / bottom margin}  and
% other page dimensions
\ifsetCustomMargin
  \RequirePackage[left=37mm,right=30mm,top=35mm,bottom=30mm]{geometry}
  \setFancyHdr % To apply fancy header after geometry package is loaded
\fi

% Add spaces between paragraphs
\setlength{\parskip}{0.25em}
% remove indent at start of paragraph
% \setlength{\parindent}{0cm}
% Ragged bottom avoids extra whitespaces between paragraphs
\raggedbottom
% To remove the excess top spacing for enumeration, list and description
%\usepackage{enumitem}
%\setlist[enumerate,itemize,description]{topsep=0em}

% *****************************************************************************
% ******************* Fonts (like different typewriter fonts etc.)*************

% Add `customfont' in the document class option to use this section

\ifsetCustomFont
  % Set your custom font here and use `customfont' in options. Leave empty to
  % load computer modern font (default LaTeX font).
  %\RequirePackage{helvet}

  % For use with XeLaTeX
  %  \setmainfont[
  %    Path              = ./libertine/opentype/,
  %    Extension         = .otf,
  %    UprightFont = LinLibertine_R,
  %    BoldFont = LinLibertine_RZ, % Linux Libertine O Regular Semibold
  %    ItalicFont = LinLibertine_RI,
  %    BoldItalicFont = LinLibertine_RZI, % Linux Libertine O Regular Semibold Italic
  %  ]
  %  {libertine}
  %  % load font from system font
  %  \newfontfamily\libertinesystemfont{Linux Libertine O}
\fi

% allow \vrb{something} to function the same as \texttt{something} 
% https://tex.stackexchange.com/questions/475230/inline-environment-shortcut-like-blah
\newcommand{\vrb}{\texttt}

% *****************************************************************************
% **************************** Custom Packages ********************************

% ************************* Algorithms and Pseudocode **************************

%\usepackage{algpseudocode}
\usepackage{minted}

% ********************Captions and Hyperreferencing / URL **********************

% Captions: This makes captions of figures use a small font with the figure label in bold and the text in slanted shape.
% https://mirror.aarnet.edu.au/pub/CTAN/macros/latex/contrib/caption/caption-eng.pdf
\RequirePackage[font=small,labelfont=bf,textfont=footnotesize,labelsep=colon,tableposition=top]{caption}

\renewcommand{\figurename}{Fig.} %to support older versions of captions.sty

% Capitalise the autoref output i.e. Chapter 1 instead of chapter 1
\renewcommand{\chapterautorefname}{Chapter}
\renewcommand{\sectionautorefname}{Section}
\renewcommand{\subsectionautorefname}{Section}

% *************************** Graphics and figures *****************************

\usepackage{rotating}
%\usepackage{wrapfig}

% Uncomment the following two lines to force Latex to place the figure.
% Use [H] when including graphics. Note 'H' instead of 'h'
%\usepackage{float}
%\restylefloat{figure}

% Subcaption package is also available in the sty folder you can use that by
% uncommenting the following line
% This is for people stuck with older versions of texlive
%\usepackage{sty/caption/subcaption}
\usepackage{subcaption}

% add frames around figure environment
\usepackage{framed}

\usepackage{fancyvrb}
\usepackage{fvextra} % allows line breaks in verbatim https://tex.stackexchange.com/a/451397/133785

% ********************************** Tables ************************************
\usepackage{booktabs} % For professional looking tables
\usepackage{multirow}

\usepackage{multicol}
\usepackage{longtable}
\usepackage{tabularx}
% center the column when using X in tabularx environment - https://tex.stackexchange.com/questions/89166/centering-in-tabularx-and-x-columns
\newcolumntype{Y}{>{\centering\arraybackslash}X}

% colour alternating rows in table - https://tex.stackexchange.com/questions/5363/how-to-create-alternating-rows-in-a-table
\usepackage[table]{xcolor}
% *********************************** SI Units *********************************
\usepackage{siunitx} % use this package module for SI units


% ******************************* Line Spacing *********************************

% Choose linespacing as appropriate. Default is one-half line spacing as per the
% University guidelines

% \doublespacing
\onehalfspacing
% \singlespacing


% ************************ Formatting / Footnote *******************************

% Don't break enumeration (etc.) across pages in an ugly manner (default 10000)
%\clubpenalty=500
%\widowpenalty=500

%\usepackage[perpage]{footmisc} %Range of footnote options

% Write markdown in overleaf - https://www.overleaf.com/learn/latex/Articles/How_to_write_in_Markdown_on_Overleaf
\usepackage[footnotes,definitionLists,hashEnumerators,smartEllipses,hybrid]{markdown}

% *****************************************************************************
% *************************** Bibliography  and References ********************

%\usepackage{cleveref} %Referencing without need to explicitly state fig /table

% Add `custombib' in the document class option to use this section
\ifuseCustomBib
%   \RequirePackage[square, sort, numbers, authoryear]{natbib} % CustomBib
   

% If you would like to use biblatex for your reference management, as opposed to the default `natbibpackage` pass the option `custombib` in the document class. Comment out the previous line to make sure you don't load the natbib package. Uncomment the following lines and specify the location of references.bib file
%   \usepackage[
%     backend=biber,
%     style=nature,
%   ]{biblatex}


\usepackage[backend=biber,style=numeric]{biblatex}
 \addbibresource{References/references.bib}
\bibliography{References/references} %Location of references.bib only for biblatex

\fi

% changes the default name `Bibliography` -> `References'
\renewcommand{\bibname}{References}

% change the bibliography text size
\renewcommand*{\bibfont}{\small}


% ******************************************************************************
% ************************* User Defined Commands ******************************
% ******************************************************************************

\newcommand{\pandora}{\texttt{pandora}}
\newcommand{\denovo}{\textit{de novo}}
\newcommand{\ecoli}{\textit{E. coli}}
\newcommand{\taiyaki}{\texttt{taiyaki}}
\newcommand{\guppy}{\texttt{guppy}}
\newcommand{\kmer}{$k$-mer}
\newcommand{\makeprg}{\texttt{make\_prg}}
\newcommand{\etal}{\textit{et al.}}
\newcommand{\mtb}{\textit{M. tuberculosis}}
\newcommand{\dbg}{dBG}
\newcommand{\ont}{Nanopore}
\newcommand{\pb}{PB}
\newcommand{\prg}{PRG}
\newcommand{\snp}{SNP}
\newcommand{\cryptic}{CRyPTIC}
\newcommand{\ppe}{\textit{pe/ppe}}
\newcommand{\haslr}{\texttt{HASLR}}
\newcommand{\flye}{\texttt{flye}}
\newcommand{\spades}{\texttt{spades}}
\newcommand{\canu}{\texttt{canu}}
\newcommand{\unicycler}{\texttt{unicycler}}
\newcommand{\bcftools}{\texttt{bcftools}}
\newcommand{\compare}{\pandora{} \texttt{compare}}
\newcommand{\drprg}{\vrb{drprg}}


% *********** To change the name of Table of Contents / LOF and LOT ************

%\renewcommand{\contentsname}{My Table of Contents}
%\renewcommand{\listfigurename}{My List of Figures}
%\renewcommand{\listtablename}{My List of Tables}

% ********************** TOC depth and numbering depth *************************

\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{2}

% ******************************* Nomenclature *********************************

% To change the name of the Nomenclature section, uncomment the following line

%\renewcommand{\nomname}{Symbols}

\nomenclature[z-dBG]{\dbg}{de Bruijn Graph}
\nomenclature[z-Mtb]{Mtb}{\textit{Mycobacterium tuberculosis}}
\nomenclature[z-ONT]{ONT}{Oxford Nanopore Technologies}
\nomenclature[z-PB]{\pb}{Pacific Biosciences}
\nomenclature[z-PRG]{\prg}{Population Reference Graph}
\nomenclature[z-SNP]{\snp}{Single Nucleotide Polymorphism}
\nomenclature[z-CRyPTIC]{\cryptic}{Comprehensive Resistance Prediction for Tuberculosis: an International Consortium}
\nomenclature[z-VCF]{VCF}{Variant call format}
\nomenclature[z-MSA]{MSA}{Multiple sequence alignment}
\nomenclature[z-IGR]{IGR}{Intergenic region}
\nomenclature[z-QC]{QC}{Quality control}
\nomenclature[z-TB]{TB}{Tuberculosis}
\nomenclature[z-H37Rv]{H37Rv}{The \mtb{} strain with the best characterised reference genome. Interchangeably use to indicate the genome assembly.}
\nomenclature[z-WGS]{WGS}{Whole-genome sequencing}
\nomenclature[z-FRS]{FRS}{Fraction of read support}
\nomenclature[z-PHE]{PHE}{Public Health England}
\nomenclature[z-STEC]{STEC}{Shiga toxin-producing \ecoli{}}
\nomenclature[z-DST]{DST}{Drug susceptibility testing}
\nomenclature[z-LPA]{LPA}{Line probe assay}
\nomenclature[z-AMR]{AMR}{Antimicrobial resistance}
\nomenclature[z-ML]{ML}{Maximum likelihood}
\nomenclature[z-bp]{bp}{Base pairs - used as a way of measuring the number of nucleotides}
\nomenclature[z-TP]{TP}{True positive}
\nomenclature[z-TN]{TN}{True negative}
\nomenclature[z-FN]{FN}{False negative}
\nomenclature[z-FP]{FP}{False positive}
\nomenclature[z-WHO]{WHO}{World Health Organization}


% ********************************* Appendix ***********************************

% The default value of both \appendixtocname and \appendixpagename is `Appendices'. These names can all be changed via:

%\renewcommand{\appendixtocname}{List of appendices}
%\renewcommand{\appendixname}{Appndx}

% *********************** Configure Draft Mode **********************************

% Uncomment to disable figures in `draft'
%\setkeys{Gin}{draft=true}  % set draft to false to enable figures in `draft'

% These options are active only during the draft mode
% Default text is "Draft"
% \SetDraftText{DRAFT}

% Default Watermark location is top. Location (top/bottom)
% \SetDraftWMPosition{bottom}

% Draft Version - default is v1.0
%\SetDraftVersion{v1.1}

% Draft Text grayscale value (should be between 0-black and 1-white)
% Default value is 0.75
%\SetDraftGrayScale{0.8}


% ******************************** Todo Notes **********************************
%% this configuration was adapted from https://tex.stackexchange.com/a/178806/133785
\usepackage{xargs}                      % Use more than one optional parameter in a new commands
\usepackage[colorinlistoftodos,prependcaption,textsize=small]{todonotes}
\newcommandx{\unsure}[2][1=]{\todo[linecolor=red,backgroundcolor=red!25,bordercolor=red,#1]{#2}}
\newcommandx{\change}[2][1=]{\todo[linecolor=blue,backgroundcolor=blue!25,bordercolor=blue,#1]{#2}}
\newcommandx{\towrite}[2][1=]{\todo[linecolor=yellow,backgroundcolor=yellow!25,bordercolor=yellow,#1]{#2}}
\newcommandx{\info}[2][1=]{\todo[linecolor=green,backgroundcolor=green!25,bordercolor=green,#1]{#2}}
\newcommandx{\improvement}[2][1=]{\todo[linecolor=purple,backgroundcolor=purple!25,bordercolor=purple,#1]{#2}}
\newcommandx{\thiswillnotshow}[2][1=]{\todo[disable,#1]{#2}}